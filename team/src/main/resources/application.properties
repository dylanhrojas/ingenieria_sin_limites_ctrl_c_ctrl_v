# =====================================================
# CONFIGURACIÓN DE LA APLICACIÓN
# Conector Semántico - OneCard
# =====================================================

# Nombre de la aplicación
spring.application.name=conector-semantico

# Puerto del servidor
server.port=8081

# =====================================================
# CONFIGURACIÓN DE BASE DE DATOS POSTGRESQL
# =====================================================

# URL de conexión a PostgreSQL
spring.datasource.url=jdbc:postgresql://localhost:5432/conector_semantico
spring.datasource.username=postgres
spring.datasource.password=..sqladmin..

# Driver de PostgreSQL
spring.datasource.driver-class-name=org.postgresql.Driver

# Configuración del pool de conexiones HikariCP
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000

# =====================================================
# CONFIGURACIÓN DE JPA/HIBERNATE
# =====================================================

# Dialecto de PostgreSQL
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Mostrar SQL en consola (útil para desarrollo)
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Estrategia de generación de schema
# - create: Borra y crea las tablas cada vez (SOLO DESARROLLO)
# - update: Actualiza el schema según las entidades (DESARROLLO)
# - validate: Solo valida que el schema coincida (PRODUCCIÓN)
# - none: No hace nada (PRODUCCIÓN - usar con Flyway/Liquibase)
spring.jpa.hibernate.ddl-auto=update

# Configuraciones adicionales de Hibernate
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false

# Logging de SQL
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# =====================================================
# CONFIGURACIÓN DE THYMELEAF
# =====================================================

# Habilitar Thymeleaf
spring.thymeleaf.enabled=true

# Prefijo de las plantillas
spring.thymeleaf.prefix=classpath:/templates/

# Sufijo de las plantillas
spring.thymeleaf.suffix=.html

# Modo de template (HTML5 recomendado)
spring.thymeleaf.mode=HTML

# Encoding
spring.thymeleaf.encoding=UTF-8

# Cache de plantillas (false en desarrollo, true en producción)
spring.thymeleaf.cache=false

# Content Type
spring.thymeleaf.servlet.content-type=text/html

# =====================================================
# CONFIGURACIÓN DE RECURSOS ESTÁTICOS
# =====================================================

# Ubicación de recursos estáticos
spring.web.resources.static-locations=classpath:/static/

# Cache de recursos estáticos (false en desarrollo)
spring.web.resources.cache.period=0

# =====================================================
# CONFIGURACIÓN DE SEGURIDAD
# =====================================================

# Habilitar seguridad HTTP básica (se configurará en WebSecurityConfig)
# spring.security.user.name=admin
# spring.security.user.password=admin123

# =====================================================
# CONFIGURACIÓN DE LOGGING
# =====================================================

# Nivel de logging general
logging.level.root=INFO

# Nivel de logging para la aplicación
logging.level.com.onecard=DEBUG

# Nivel de logging para Spring
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.security=DEBUG

# Patrón de logging
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Archivo de logs (opcional)
# logging.file.name=logs/conector-semantico.log
# logging.file.max-size=10MB
# logging.file.max-history=30

# =====================================================
# CONFIGURACIÓN DE MENSAJES DE ERROR
# =====================================================

# Incluir mensaje de error en respuestas
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param
server.error.include-exception=false

# =====================================================
# CONFIGURACIÓN DE SESIONES
# =====================================================

# Timeout de sesión (30 minutos)
server.servlet.session.timeout=30m

# Cookies de sesión
server.servlet.session.cookie.name=CONECTOR_SEMANTICO_SESSION
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false

# =====================================================
# CONFIGURACIÓN ADICIONAL
# =====================================================

# Zona horaria
spring.jpa.properties.hibernate.jdbc.time_zone=America/Mexico_City

# Formato de fechas JSON
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.time-zone=America/Mexico_City

# Tamaño máximo de archivos (si se necesita upload)
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB


# ============================================
# CONFIGURACIÓN PARA SUBIDA DE ARCHIVOS
# Agregar estas líneas a tu application.properties
# ============================================

# Directorio donde se guardarán las imágenes de tickets
app.upload.dir=uploads

# Tamaño máximo de archivo (10MB)
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Habilitar multipart
spring.servlet.multipart.enabled=true